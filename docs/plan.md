# Windows/macOS Markdown 编辑器（类 Typora）开发路线

下面是一个可落地的开发路线，覆盖产品定位、技术选型、核心功能、架构设计与发布。

## 1. 明确产品定位
- **目标用户**：写作/技术文档/知识管理/轻量笔记。
- **核心体验**：所见即所得（WYSIWYG + Markdown 源码可切换）。
- **关键差异点**（按“轻量”优先落地）：
  - 更轻量启动、低内存占用（优先）
  - Typora 式操作习惯（回车/退格行为、快捷键、所见即所得）
  - 深色模式内置
  - 后续可扩展语法渲染（如 Mermaid）

## 2. 技术选型
你要同时支持 Windows + macOS，推荐三种主流技术路线：

### 2.1 Tauri + Web 前端（推荐）
- **优点**：体积小、安全性好、性能优于 Electron。
- **技术栈**：Tauri (Rust) + React/Vue/Svelte。
- **适合场景**：对体积和性能敏感、可接受一定 Rust 学习成本。

### 2.2 Electron + Web 前端
- **优点**：生态成熟、上手快、插件多。
- **缺点**：包体大、内存高。
- **适合场景**：快速迭代，优先功能完整性。

### 2.3 原生（Swift + WinUI）
- **优点**：性能最佳、原生体验。
- **缺点**：维护成本高，双端开发。
- **适合场景**：有强原生团队、预算充足。

## 3. 核心功能清单（轻量 MVP）
- **基础语法**：分级标题、表格、行内代码、代码块、超链接。
- **图片能力**：
  - 插入本地图片与拖拽图片
  - 复制/粘贴图片自动保存并插入
  - 对接 PicGo 实现自动上传并替换链接（本地路径 → 远程链接）
- **编辑体验**：Typora 风格 WYSIWYG，常用快捷键一致。
- **UI**：内置深色模式（Dark Mode）。
- **文件系统**：打开/保存 Markdown 文件。
- **扩展预留**：后续支持 Mermaid 渲染。

## 4. 编辑器内核方案
推荐基于成熟的富文本/编辑器内核，减少工作量：

- **ProseMirror / Tiptap**
  - 可扩展 Markdown schema
  - 适合 WYSIWYG 模式
- **CodeMirror 6 / Monaco**
  - 强大的 Markdown 源码编辑体验
  - 可与预览联动

常见做法：
- WYSIWYG 方案：Tiptap + Markdown 转换
- 分栏方案：CodeMirror + Markdown 渲染器（如 markdown-it）

## 5. 架构设计建议
- **前端 UI 层**：编辑器、侧边栏、文件树、设置面板
- **核心逻辑层**：
  - 文档管理（文件读写、最近打开列表）
  - Markdown AST 转换
  - 导出模块
- **平台能力层**：
  - 通过 Tauri/Electron 调用系统 API
  - 文件系统、剪贴板、通知、系统主题

## 6. 推荐开发步骤（按轻量优先）
1. 选定技术栈（建议用 Tauri 以减小体积）。
2. 完成 WYSIWYG 内核与基础语法（标题、表格、行内代码、代码块、超链接）。
3. 完成图片处理链路：
   - 本地图片插入与粘贴识别
   - 与 PicGo 对接，上传后替换图片链接
4. 实现 Typora 风格交互与快捷键。
5. 添加深色模式与基础主题设置。
6. 完成文件读写与打包发布（签名、自动更新）。
7. 扩展语法渲染（Mermaid 等）。

## 7. 发布与运维
- macOS 需要签名和 notarization
- Windows 需要签名证书
- 可选：自动更新（Tauri/Electron 内置方案）

---

如果你还希望进一步细化（比如 PicGo 具体协议、图片缓存策略、WYSIWYG 交互细节），我可以继续补充可执行的里程碑拆解。
